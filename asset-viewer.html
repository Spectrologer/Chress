<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chress Asset Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background-color: #1a1a1a;
            color: #e0e0e0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #ffffff;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #444;
            padding-bottom: 10px;
        }

        .tab-button {
            padding: 10px 20px;
            background-color: #2a2a2a;
            color: #e0e0e0;
            border: 1px solid #444;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .tab-button:hover {
            background-color: #3a3a3a;
        }

        .tab-button.active {
            background-color: #444;
            color: #ffffff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .asset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .asset-card {
            background-color: #2a2a2a;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 15px;
            text-align: center;
        }

        .asset-card h3 {
            margin-bottom: 10px;
            color: #ffffff;
            font-size: 14px;
        }

        .sprite-container {
            background-color: #333;
            background-image:
                linear-gradient(45deg, #444 25%, transparent 25%),
                linear-gradient(-45deg, #444 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #444 75%),
                linear-gradient(-45deg, transparent 75%, #444 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            padding: 20px;
            margin: 10px 0;
            display: inline-block;
            border-radius: 4px;
        }

        .sprite {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            display: block;
        }

        .sprite-info {
            font-size: 12px;
            color: #aaa;
            margin-top: 10px;
        }

        .scale-controls {
            margin: 20px 0;
            text-align: center;
        }

        .scale-controls label {
            margin-right: 10px;
        }

        .scale-controls input[type="range"] {
            width: 200px;
            vertical-align: middle;
        }

        .scale-value {
            display: inline-block;
            width: 40px;
            text-align: left;
            margin-left: 10px;
        }

        .error {
            color: #ff6b6b;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>Chress Asset Viewer</h1>

    <div class="scale-controls">
        <label for="scale-slider">Scale:</label>
        <input type="range" id="scale-slider" min="1" max="10" value="4">
        <span class="scale-value" id="scale-value">4x</span>
    </div>

    <div class="tabs">
        <button class="tab-button active" data-tab="npcs">NPCs</button>
        <button class="tab-button" data-tab="enemies">Enemies</button>
        <button class="tab-button" data-tab="items">Items</button>
        <button class="tab-button" data-tab="food">Food</button>
        <button class="tab-button" data-tab="ui">UI</button>
    </div>

    <div id="npcs" class="tab-content active">
        <h2>NPC Portraits & Sprites</h2>
        <div class="asset-grid" id="npc-grid"></div>
    </div>

    <div id="enemies" class="tab-content">
        <h2>Enemy Sprites</h2>
        <div class="asset-grid" id="enemy-grid"></div>
    </div>

    <div id="items" class="tab-content">
        <h2>Item Sprites</h2>
        <div class="asset-grid" id="item-grid"></div>
    </div>

    <div id="food" class="tab-content">
        <h2>Food Sprites</h2>
        <div class="asset-grid" id="food-grid"></div>
    </div>

    <div id="ui" class="tab-content">
        <h2>UI Elements</h2>
        <div class="asset-grid" id="ui-grid"></div>
    </div>

    <script type="module">
        import { Sign } from './ui/Sign.js';

        let currentScale = 4;

        // NPC data from Sign.js
        const npcAssets = [
            // Dialogue NPCs
            { name: 'Crayn', portrait: 'assets/fauna/craynface.png', sprite: 'assets/fauna/crayn.png' },
            { name: 'Felt', portrait: 'assets/fauna/feltface.png', sprite: 'assets/fauna/felt.png' },
            { name: 'Forge', portrait: 'assets/fauna/forgeface.png', sprite: 'assets/fauna/forge.png' },

            // Barter NPCs
            { name: 'Penne', portrait: 'assets/fauna/lionface.png', sprite: 'assets/fauna/lion.png' },
            { name: 'Squig', portrait: 'assets/fauna/squigface.png', sprite: 'assets/fauna/squig.png' },
            { name: 'Rune', portrait: 'assets/fauna/runeface.png', sprite: 'assets/fauna/rune.png' },
            { name: 'Nib', portrait: 'assets/fauna/nibface.png', sprite: 'assets/fauna/nib.png' },
            { name: 'Mark', portrait: 'assets/fauna/markface.png', sprite: 'assets/fauna/mark.png' },
            { name: 'Axe-O-Lot\'l', portrait: 'assets/fauna/axolotlface.png', sprite: 'assets/fauna/axolotl.png' },
            { name: 'Gouge', portrait: 'assets/fauna/gougeface.png', sprite: 'assets/fauna/gouge.png' },

            // Enemy types from statues
            { name: 'Lizardy', sprite: 'assets/fauna/lizardy.png' },
            { name: 'Lizardo', sprite: 'assets/fauna/lizardo.png' },
            { name: 'Lizardeaux', sprite: 'assets/fauna/lizardeaux.png' },
            { name: 'Zard', sprite: 'assets/fauna/zard.png' },
            { name: 'Lazerd', sprite: 'assets/fauna/lazerd.png' },
            { name: 'Lizord', sprite: 'assets/fauna/lizord.png' }
        ];

        // Enemy assets
        const enemyAssets = [
            { name: 'Lizardy', sprite: 'assets/fauna/lizardy.png' },
            { name: 'Lizardo', sprite: 'assets/fauna/lizardo.png' },
            { name: 'Lizardeaux', sprite: 'assets/fauna/lizardeaux.png' },
            { name: 'Zard', sprite: 'assets/fauna/zard.png' },
            { name: 'Lazerd', sprite: 'assets/fauna/lazerd.png' },
            { name: 'Lizord', sprite: 'assets/fauna/lizord.png' }
        ];

        // Item assets
        const itemAssets = [
            { name: 'Bomb', sprite: 'assets/items/bomb.png' },
            { name: 'Spear', sprite: 'assets/items/spear.png' },
            { name: 'Bow', sprite: 'assets/items/bow.png' },
            { name: 'Horse', sprite: 'assets/items/horse.png' },
            { name: 'Book', sprite: 'assets/items/book.png' },
            { name: 'Shovel', sprite: 'assets/items/shovel.png' },
            { name: 'Axe', sprite: 'assets/items/axe.png' },
            { name: 'Hammer', sprite: 'assets/items/hammer.png' },
            { name: 'Water', sprite: 'assets/items/water.png' },
            { name: 'Points', sprite: 'assets/items/points.png' },
            { name: 'Chest', sprite: 'assets/items/chest.png' }
        ];

        // Food assets
        const foodAssets = [
            { name: 'Meat', sprite: 'assets/food/meat/beaf.png' },
            { name: 'Nut', sprite: 'assets/food/veg/nut.png' },
            { name: 'Apple', sprite: 'assets/food/veg/apple.png' },
            { name: 'Carrot', sprite: 'assets/food/veg/carrot.png' },
            { name: 'Mushroom', sprite: 'assets/food/veg/shroom.png' }
        ];

        // UI assets
        const uiAssets = [
            { name: 'Sign', sprite: 'assets/sign.png' },
            { name: 'Talk Icon', sprite: 'assets/ui/talk.png' },
            { name: 'Heart', sprite: 'assets/ui/heart.png' },
            { name: 'Empty Heart', sprite: 'assets/ui/heartEmpty.png' }
        ];

        function createAssetCard(asset) {
            const card = document.createElement('div');
            card.className = 'asset-card';

            const title = document.createElement('h3');
            title.textContent = asset.name;
            card.appendChild(title);

            // Display portrait if available
            if (asset.portrait) {
                const portraitContainer = document.createElement('div');
                portraitContainer.className = 'sprite-container';

                const portrait = document.createElement('img');
                portrait.className = 'sprite';
                portrait.src = asset.portrait;
                portrait.style.width = `${32 * currentScale}px`;
                portrait.style.height = 'auto';

                portrait.onerror = () => {
                    portrait.style.display = 'none';
                    const error = document.createElement('div');
                    error.className = 'error';
                    error.textContent = 'Portrait not found';
                    portraitContainer.appendChild(error);
                };

                portrait.onload = () => {
                    const info = document.createElement('div');
                    info.className = 'sprite-info';
                    info.textContent = `Portrait: ${portrait.naturalWidth}×${portrait.naturalHeight}px`;
                    card.appendChild(info);
                };

                portraitContainer.appendChild(portrait);
                card.appendChild(portraitContainer);
            }

            // Display sprite
            if (asset.sprite) {
                const spriteContainer = document.createElement('div');
                spriteContainer.className = 'sprite-container';

                const sprite = document.createElement('img');
                sprite.className = 'sprite';
                sprite.src = asset.sprite;
                sprite.style.width = `${16 * currentScale}px`;
                sprite.style.height = 'auto';

                sprite.onerror = () => {
                    sprite.style.display = 'none';
                    const error = document.createElement('div');
                    error.className = 'error';
                    error.textContent = 'Sprite not found';
                    spriteContainer.appendChild(error);
                };

                sprite.onload = () => {
                    const info = document.createElement('div');
                    info.className = 'sprite-info';
                    info.textContent = `Sprite: ${sprite.naturalWidth}×${sprite.naturalHeight}px`;
                    card.appendChild(info);
                };

                spriteContainer.appendChild(sprite);
                card.appendChild(spriteContainer);
            }

            return card;
        }

        function loadAssets(assets, gridId) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = '';
            assets.forEach(asset => {
                grid.appendChild(createAssetCard(asset));
            });
        }

        function updateScale(scale) {
            currentScale = scale;
            document.querySelectorAll('.sprite').forEach(img => {
                const isPortrait = img.src.includes('face');
                const baseSize = isPortrait ? 32 : 16;
                img.style.width = `${baseSize * scale}px`;
            });
        }

        // Initialize
        loadAssets(npcAssets, 'npc-grid');
        loadAssets(enemyAssets, 'enemy-grid');
        loadAssets(itemAssets, 'item-grid');
        loadAssets(foodAssets, 'food-grid');
        loadAssets(uiAssets, 'ui-grid');

        // Tab switching
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons and contents
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

                // Add active class to clicked button and corresponding content
                button.classList.add('active');
                document.getElementById(button.dataset.tab).classList.add('active');
            });
        });

        // Scale slider
        const scaleSlider = document.getElementById('scale-slider');
        const scaleValue = document.getElementById('scale-value');

        scaleSlider.addEventListener('input', (e) => {
            const scale = parseInt(e.target.value);
            scaleValue.textContent = `${scale}x`;
            updateScale(scale);
        });
    </script>
</body>
</html>